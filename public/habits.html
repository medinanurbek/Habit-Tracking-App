<!doctype html>
<html lang="ru">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Habits â€¢ Habit Tracker</title>
  <link rel="stylesheet" href="assets/styles.css" />
</head>

<body>
  <div class="toast" id="toast"></div>

  <div class="container">
    <div class="app">
      <!-- SIDEBAR -->
      <aside class="sidebar">
        <div class="top">
          <div class="userbox">
            <div class="avatar">ğŸ‘¤</div>
            <div class="user-meta">
              <div class="user-name" id="sbName">Guest</div>
              <div class="user-email" id="sbEmail">Not signed in</div>
            </div>
          </div>
          <div class="row">
            <button class="btn small" id="themeToggle" onclick="toggleTheme()">ğŸŒ™ Dark</button>
            <button class="btn small" onclick="logoutUI()">Logout</button>
          </div>
        </div>

        <div class="nav">
          <a href="habits.html">ğŸ“‹ All Habits</a>
          <a href="profile.html">ğŸ‘¤ Profile</a>
        </div>

        <div class="section">
          <div class="section-title">TIME OF DAY</div>
          <div class="simple-item tod-item" data-tod="Morning">â˜€ï¸ Morning <span class="dot">â€¢ now</span></div>
          <div class="simple-item tod-item" data-tod="Afternoon">ğŸŒ¤ï¸ Afternoon <span class="dot">â€¢ now</span></div>
          <div class="simple-item tod-item" data-tod="Evening">ğŸŒ™ Evening <span class="dot">â€¢ now</span></div>
        </div>

        <div class="bottom">
        </div>
      </aside>

      <!-- MAIN -->
      <section class="main">
        <div class="topbar">
          <div class="title">
            <h1>Today</h1>
            <div class="subtitle">
              <span>ğŸ“…</span>
              <span id="count">0 habits</span>
            </div>
          </div>

          <div class="row">
            <input class="input" id="search" placeholder="Search habitsâ€¦" />

            <!-- Time dropdown -->
            <div class="dd" id="ddTime">
              <button class="dd-btn" type="button" id="timeBtn">
                All day â–¾
              </button>
              <div class="dd-menu" id="timeMenu"></div>
            </div>

            <!-- Area dropdown -->
            <div class="dd" id="ddArea">
              <button class="dd-btn" type="button" id="areaBtn">
                All â–¾
              </button>
              <div class="dd-menu" id="areaMenu"></div>
            </div>

            <button class="btn" id="toggleView">
              <span id="viewBtn">List</span>
            </button>

            <a class="btn primary" href="habit-form.html">ï¼‹ Add habit</a>
          </div>
        </div>

        <div class="content">
          <div id="habitsWrap" class="grid"></div>
        </div>
      </section>
    </div>
  </div>

  <!-- bottom action bar -->
  <div class="bar" id="bar" style="display:none;">
    <div class="bar-inner">
      <div class="bar-left" style="min-width:0;">
        <div class="bar-title" id="barTitle">Selected habit</div>
        <div class="bar-sub" id="barSub">â€”</div>
      </div>
      <div class="row" style="justify-content:flex-end;">
        <a class="btn small" id="barEdit">âœï¸ Edit</a>
        <button class="btn small ok" id="barDone">âœ“ Complete</button>
        <button class="btn small" id="barUndo">â†º Undo</button>
        <button class="btn small danger" id="barDelete">ğŸ—‘ Delete</button>
        <button class="btn small ghost" id="barClear">Clear</button>
      </div>
    </div>
  </div>

  <script src="assets/app.js"></script>
  <script>
    initTheme();
  </script>
  <script src="assets/habits.js"></script>
  <script>
    requireAuth();
    loadHabits();

    $("#search").addEventListener("input", (e) => { state.query = e.target.value; render(); });
    $("#toggleView").addEventListener("click", () => {
      state.view = (state.view === "list") ? "grid" : "list";
      render();
    });
  </script>
</body>

</html>